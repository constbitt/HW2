# Как пользоваться программой
## 1. Меню выбора папки для сохранения состояний программы
Из этой папки будут загружаться в программу меню, список админов, список посетителей, список заказов, если эти файлы там существуют.
		Folder for saving/loading data:
			1. Input manually
			2. Use default
			3. Exit
		Choose an option: 
  
1 - ввести адрес папки с клавиатуры. (если папка не существует, предлагается  создать или использовать папку по умолчанию)

2 - использовать папку files по умолчанию (если не существует, то создается автоматически)

3 - выход из программы

## 2. Главное меню
		Welcome to the Main Page!
			1. Visitor
			2. Admin
			3. Order information board
			4. Exit
		Choose an option: 
В меню посетителя и админа можно попасть только после прохождения регистрации / аутентификации (см п 3).
### 2.1. Меню посетителя
		Welcome to Visitor Page!
			1. Order
			2. Add to order
			3. Cancel order
			4. Pay and review
			5. Order status
			6. Back
		Choose an option: 
Нужно выбрать один из пунктов:

 1 - создание заказа
  
2 - добавление блюд к существующему заказу (доступно только если у этого посетителя уже есть активный заказ)
 
3 - отмена заказа (доступно до того, как заказ приготовлен на кухне)
 
4 - оплата и отзыв о заказе (доступно только для активного заказа)
 
5 - статус заказа
 
6 - назад в главное меню
 
#### 2.1.1. Создание заказа
	Order № 1 created successfully.
		╔══════════════════════════════════╗
		║     		MENU 		   ║
		╠══════════════════════════════════╣
		║ 1. Savory Pasta    	      15.0 ║
		║ 2. Grilled Salmon           20.0 ║
		║ 3. BBQ Ribs                 25.0 ║
		║ 4. Caesar Salad             12.0 ║
		║ 5. Margherita Pizza         18.0 ║
		║ 6. Lemonade                  5.0 ║
		║ 7. Iced Americano            4.5 ║
		╚══════════════════════════════════╝
	Choose dishes by entering their numbers separated by spaces:  
Выводится меню, нужно ввести номера желаемых позиций через пробел. 
Если нужно несколько одинаковых блюд, вводится соответствующее число несколько раз.
Если в некорректной строке есть корректные значения, они "достаются оттуда".
Если строка полностью некорректна, выводится сообщение об этом:

	Choose dishes by entering their numbers separated by spaces: dhjfkhjakha
	Invalid choice.
	Press enter to continue...
В корректном случае после выводится список блюд заказа:

	Dishes added to the order successfully.
		Your order:
			1. Lemonade - 5.0
			2. Iced Americano - 4.5
			3. BBQ Ribs - 25.0
		Press enter to continue... 
#### 2.1.2. Добавление блюд к существующему заказу
Работает также, как и предыдущий пункт.
#### 2.1.3. Отмена заказа
Если заказ еще не готов, он отменяется и выводится сообщение:

	Order cancelled successfully.
Иначе заказ не отменяется и выводится:

	You can't cancel your order is completed.
#### 2.1.4. Оплата и отзыв о заказе

	Order paid successfully.
	Would you like to review your order? (y/n)y
		Rate the dish 'Lemonade' from 1 to 5: 5
		Enter a brief comment for the dish 'Lemonade': Very tasty!
	Thank you!
	Press enter to continue...
Предлагается оставить оценку от 1 до 5 и отзыв о заказе. 
Пользователь может отказаться, нажав n.

#### 2.1.5. Статус заказа

Выводит статус активного заказа посетителя, например:

	Order is IN_PROGRESS.
	Press enter to continue...
Статусы могу быть следующие: 

	CREATED, ACCEPTED, IN_PROGRESS, READY, COMPLETED, CANCELLED
Если у посетителя нет активных заказов:

	You don't have any orders being processed.
	Press enter to continue...
#### 2.1.6. Назад
Возвращает в главное меню
### 2.2. Меню админа
	Welcome to Admin Page!
		1. Add dish to menu
		2. Delete dish from menu
		3. Statistics
		4. See menu
		5. Back
	Choose an option: 
1 - добавление блюда в меню

2 - удаление блюда из меню

3 - просмотр статистики

4 - просмотр меню

5 - назад в главное меню

#### 2.2.1. Добавление блюда в меню
	
	Please input dish info!
		Enter dish name: Cola
		Enter dish price: 5
		Enter preparation time for the dish: 12
		Enter quantity for the dish: 20
	Dish Cola added to the menu.
	Do you want to enter another dish? (y/n): n
Нужно ввести название блюда, корректные цену, время приготовления и количество, после чего блюдо будет добавлено в меню.
#### 2.2.2. Удаление блюда из меню
Работает также, как и пункт 2.1.1 Создание заказа, только при этом введенные блюда удаляются из меню при наличии.
#### 2.2.3. Просмотр статистики
	Select statistics:
		1. Dish rating
		2. Dish popularity
		3. Order statistics
		4. Back
	Input a number from 1 to 4:
1 - рейтинг блюд по их оценке в заказах:

	+------------------+--------------------+--------------------+
	|     Dish name    |   Average rating   |        Price       |
	+------------------+--------------------+--------------------+
	|  Savory Pasta    |  5                 |  15.00             |
	|  Grilled Salmon  |  4.3               |  20.00             |
	|  BBQ Ribs        |  -                 |  25.00             |
	|  Caesar Salad    |  -                 |  12.00             |
	|  Margherita Pizza|  -                 |  18.00             |
	|  Lemonade        |  -                 |  5.00              |
	|  Iced Americano  |  -                 |  4.50              |
	+------------------+--------------------+--------------------+
	Press enter to continue...
	
2 - рейтинг популярности блюд:

	+------------------+--------------------+--------------------+
	|   Dish name      |  Number of orders  |         Price      |
	+------------------+--------------------+--------------------+
	+------------------+--------------------+--------------------+

Press enter to continue...
3 - статистика по заказам за определенный период:
сначала нужно ввести корректные даты:

	Start date
	Input date (yyyy MM dd): 2020 12 12
	End date
	Input date (yyyy MM dd): 2024 12 23

потом выводится статистика за этот период:

	+------------------------------------------------------------+
	|            Period: 2020-12-12 to 2024-12-23                |
	+------------------+--------------------+--------------------+
	|     Order ID     |     Order price    |     Food rating    |
	+------------------+--------------------+--------------------+
	+------------------+--------------------+--------------------+
	|    Total Orders:        0                                  |
	|    Total Revenue:       0.00                               |
	|    Average Check:       0.00                               |
	|    Average Food Rating: -                                  |
	+------------------------------------------------------------+
	Press enter to continue...


#### 2.2.4. Просмотр меню
Выводится меню:

		╔══════════════════════════════════╗
		║     		MENU 		   ║
		╠══════════════════════════════════╣
		║ 1. Savory Pasta    	      15.0 ║
		║ 2. Grilled Salmon           20.0 ║
		║ 3. BBQ Ribs                 25.0 ║
		║ 4. Caesar Salad             12.0 ║
		║ 5. Margherita Pizza         18.0 ║
		║ 6. Lemonade                  5.0 ║
		║ 7. Iced Americano            4.5 ║
		╚══════════════════════════════════╝

#### 2.2.5. Назад
Возврат в главное меню
### 2.3. Табло принятых заказов
Здесь отображаются незавершенные заказы и их статусы:

	Order Information Board:
	+-----------+--------------+
	| Order ID  |   Status     |
	+-----------+--------------+
	| 1         |        READY |
	| 2         |        READY |
	| 3         |  IN_PROGRESS |
	+-----------+--------------+
	Press enter to continue...


### 2.4. Выход из программы

При завершении программы в выбранную папку сохраняются меню, список админов, список посетителей, список заказов (незавершенные при этом отменяются), выручка.
# Принцип приоритета заказов
Кухня все время проверяет список заказов.
Для каждого заказа вычисляется общее время приготовления его блюд и выбирается самый быстрый заказ.
Он и готовится в приоритете. Если в этот заказ в процессе приготовления добавляются блюда, приоритеты не меняются.

# Используемые паттерны проектирования
## Синглтон
### 1. KitchenService
Для работы кухни используется сиглтон, потому что кухня нужна только одна и должна быть легко доступна из многих мест программы (создание заказа, добавление блюд, отмена, просмотр статуса, табло заказов)
Также наличие единственного экземпляра этого класса позволяет не запутаться в приоритете заказов.
### 2. DataManager
Почти все классы программы взаимодействуют с свойствами DataManager. Они хранят всю информацию о ресторане, пользователях и заказах. Синглтон позволяет обеспечить согласованность этих данных и упростить к ним доступ.
Также функции загрузки предыдущего состояния программы и сохранения текущего должны вызываться только один раз в жизни программы.
## Фасад
### 1. MainPage 
Для главной страницы используется фасад, чтобы скрывать сложность и детали работы системы от клиента, предоставляя упрощенный интерфейс для выбора различных опций.
### 2. AuthenticationPage
Фасад используется для сокрытия от пользователя реализации создания новых пользователей и процесса аутентификации.
### 3. VisitorPage
Здесь используется фасад, так как страница должна предоставлять упрощенный интерфейс для выполнения операций, инкапсулированных в VisitorService (создание заказа, добавление блюда, отмена заказа, оплата и оценка, а также получение статуса заказа).
### 4. AdminPage
Действует как фасад, предоставляя админу простой интерфейс для выполнения сложных операций, таких как добавление блюда, удаление блюда, просмотр статистики и меню.
## Фабрика
### 1. UserFactory
Позволяет добавлять новых пользователей различных типов не привязываясь к конкретным классам посетителя и админа. 
Также паттерн позволил вынести "производство" новых пользователей в отдельное место.
## Посредник
### 1.  VisitorService
Используется паттерн посредник для уменьшения связанности посетителя, действующего через VisitorPage и конкретных классов команд.
### 2. AdminService
Паттерн позволяет коду клиента в AdminPage не зависеть от от конкретной реализации операций админа.
### 3. AdminCommandProcessor
Используется для упрощения доступа к командам админа, позволяет избавиться от связи админа с множеством классов, используемых командами.
### 4. OrdersCommandProcessor
Используется для упрощения взаимодействия с командами пользователя, позволяет избавиться от связи пользователя с множеством классов, используемых командами.
## Команда
### 1.  Команды пользователя:  
#### - CreateOrderCommand, 
#### - AddToOrderCommand, 
#### - CancelOrderCommand, 
#### - PayOrderCommand, 
#### - GetOrderStatusCommand
Здесь команда используется для выполнения действий пользователя. Команд у него много, поэтому удобно имень общий интерфейс для добавления нового действия, не изменяя существующий код.
Также изначально планировалось ставить действия в очередь, что тоже удобно с этим паттерном, но, к сожалению, не пригодилось.
### 2.  Команды админа: 
#### - AddDishCommand
#### - DeleteDishCommand
#### - StatisticsCommand
#### - SeeMenuCommand
Здесь команда используется по той же причине, что и предыдущий пункт, для удобного управления действиями админа.
## Стратегия
### 1. MainPage
Часть функциональности MainPage зависит от выбранного типа пользователя (посетитель, администратор). Например, в методе load() вызываются различные страницы в зависимости от типа пользователя. Это позволяет вынести отличающееся поведение в отдельные классы в зависимости от контекста.
